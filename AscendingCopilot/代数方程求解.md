# 代数方程求解：固定分支对话设计（3-5 种情况）

本页说明“代数方程求解”知识点在演示中采用的固定分支（可复现、可控）对话逻辑，并附一个完整对话示例。

## 分支概览

- **A 分支（首答错误）**：
  - 触发条件：首条学生回答包含典型错误（如“正确/没错”等）或缺失关键概念。
  - 引导路径：追问 1「x=0 是否成立？」→ 若部分正确则继续追问 2「有哪些解，为什么？」→ 正确后总结。
- **B 分支（首答部分正确）**：
  - 触发条件：首答方向正确但不完整。
  - 引导路径：追问「有哪些解，为什么？」→ 正确后总结。如仍不完整，重复该追问。
- **C 分支（首答正确）**：
  - 触发条件：首答包含关键概念或明确列出 x=0 与 x=1。
  - 引导路径：直接进入总结。
- **D 分支（空/无关）**：
  - 触发条件：空白或与主题无关。
  - 引导路径：回到追问 1「x=0 是否成立？」。

说明：以上分支仅对“代数方程求解”启用；其他知识点仍走通用自适应策略。

## 首题与追问模板

- 首题（固定）：「你发现了 AI 推理过程中的错误吗？请描述你的观察。」
- 追问 1：当 x = 0 时，方程 x² = x 还成立吗？
- 追问 2：那这个方程究竟有哪些解？为什么？
- 重复追问（用于 B 分支未补全时）：再想想：有哪些解？为什么？请给出理由。

## 完整示例对话（对应 A 分支）

1. 错误模拟（AI）
   - 两边同时除以 x → 得到 x=1（错误）
2. 首题（AI）
   - 你发现错误吗？
3. 学生首答（错误）
   - 我觉得 AI 的解法是正确的。
4. 反馈与置信度
   - ❌ 回答不正确；置信度示例：35%，触发追问
5. 追问 1（AI）
   - 当 x=0 时，方程 x² = x 还成立吗？
6. 学生二答（部分正确）
   - 不能除以零。
7. 反馈与置信度
   - ⚠️ 部分正确；置信度示例：45%
8. 追问 2（AI）
   - 那这个方程究竟有哪些解？为什么？
9. 学生三答（正确）
   - 应该有 x=0 和 x=1。
10. 反馈与置信度
    - ✅ 正确；置信度示例：75%
11. 总结（AI）
    - 正确方法、关键教训、建议、最终置信度等。

## 在系统中的落地

- 后端：`app.py`
  - 启用条件：当知识点包含「代数方程/代数方程求解」时，开启固定脚本模式。
  - 核心：
    - `get_question` 首题固定化。
    - `process_answer` 中判定答案类别并推进分支（A/B/C/D），返回指定追问与是否继续。
    - 若为固定脚本，`get_follow_up_question` 不再随机，由 `process_answer` 给出具体追问文本。
- 前端：仍使用现有渲染逻辑（消息、反馈、置信度、总结）。

## 评委演示建议

- 展示“一键演示”，观察当首答不同（错误/部分正确/正确/无关）时，AI 如何进入不同分支。
- 对比固定分支与通用策略的差异：固定脚本保证评委体验稳定、可复现；通用策略适合真实教学场景。
